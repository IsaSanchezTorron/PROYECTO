{"remainingRequest":"/home/hab07/Desktop/Repo-Proyecto/PROYECTO/Frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hab07/Desktop/Repo-Proyecto/PROYECTO/Frontend/src/views/Admin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hab07/Desktop/Repo-Proyecto/PROYECTO/Frontend/src/views/Admin.vue","mtime":1593439075264},{"path":"/home/hab07/Desktop/Repo-Proyecto/PROYECTO/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hab07/Desktop/Repo-Proyecto/PROYECTO/Frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hab07/Desktop/Repo-Proyecto/PROYECTO/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hab07/Desktop/Repo-Proyecto/PROYECTO/Frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vSU1QT1JUQU1PUyBQQVJBCi8vIG1hbmVqYXIgZW5kcG9pbnRzIHkgcnV0YXMKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKLy8gYWxlcnRhcyBjdXN0b20KaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwovLyBUaXR1bGFyIGxhcyBwZXN0YcOxYXMgdmlzaWJsZXMgZW4gZWwgbmF2ZWdhZG9yCmltcG9ydCB2dWVIZWFkZnVsIGZyb20gInZ1ZS1oZWFkZnVsIjsKLy8gY29tcG9uZW50ZXMgaW50ZXJub3MKaW1wb3J0IG1lbnVjdXN0b20gZnJvbSAiQC9jb21wb25lbnRzL01lbnVDdXN0b20udnVlIgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiQWRtaW4iLAogICAgY29tcG9uZW50czoge21lbnVjdXN0b219LAoKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgY29uY3Vyc29zIDpbXSwKICAgICAgICBzZWFyY2g6IiIsCiAgICAgICAgbm9tYnJlOiAiIiwKICAgICAgICBmZWNoYV9maW5hbDogIiIsCiAgICAgICAgZGVzY3JpcGNpb246ICIiLAogICAgICAgIG1vZGFsaWRhZDoiIiwKICAgICAgICBnZW5lcm86IiIsCiAgICAgICAgY2l1ZGFkOiIiLAogICAgICAgIGZlY2hhX3B1YmxpY2FjaW9uOiIiLAogICAgICAgIG1vZGFsOiBmYWxzZSwKICAgICAgICAKICAgICAgICB9OwogICAgfSwKCgpjb21wdXRlZDogewogICAgLy9GVU5DScOTTiBQQVJBIEZJTFRSQVIgUFJPRFVDVE9TCiAgICBjb25jdXJzb3NGaWx0cmFkb3MoKSB7CiAgICAgIC8vIFNpIGVuIGxhIGLDunNxdWVkYSBubyBoYXkgbmFkYSBub3MgZGV2dWVsdmUgdG9kby4KICAgICAgaWYgKCF0aGlzLnNlYXJjaCkgewogICAgICAgIHJldHVybiB0aGlzLmNvbmN1cnNvczsKICAgICAgICAKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5jb25jdXJzb3MuZmlsdGVyKAogICAgICAgIChjb25jdXJzbykgPT4KICAgICAgICAgIGNvbmN1cnNvLm5vbWJyZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2VhcmNoLnRvTG93ZXJDYXNlKCkpIHx8CiAgICAgICAgICBjb25jdXJzby5kZXNjcmlwY2lvbgogICAgICAgICAgICAudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAuaW5jbHVkZXModGhpcy5zZWFyY2gudG9Mb3dlckNhc2UoKSkgfHwKICAgICAgICAgIGNvbmN1cnNvLm1vZGFsaWRhZAogICAgICAgICAgICAudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAuaW5jbHVkZXModGhpcy5zZWFyY2gudG9Mb3dlckNhc2UoKSkgfHwKICAgICAgICAgIGNvbmN1cnNvLmdlbmVyby50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2VhcmNoLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgLy9Pam8gYXF1w60sIHBlbmRpZW50ZSBxdWUgZnVuY2lvbmUgbGEgYsO6c3F1ZWRhIHBvciBjaXVkYWQuCiAgICAgICAgLy8gY29uY3Vyc28uY2l1ZGFkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5zZWFyY2gudG9Mb3dlckNhc2UoKSkKICAgICAgKTsKICAgIH0sCiAgfSwKCgogICAgbWV0aG9kczogewoKCiAgICAKICAgb3Blbk1vZGFsKCkgewogICAgICB0aGlzLm1vZGFsID0gdHJ1ZTsKICAgICAgCgogICB9LAogICBjbG9zZU1vZGFsKCl7CiAgICAgdGhpcy5tb2RhbCA9IGZhbHNlOwogICB9LAoKCiBzaG93QWxsQ29uY291cnNlcygpewogICAgbGV0IHNlbGY9IHRoaXM7CiAgICBheGlvcwogICAgICAgIC5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMy9jb25jdXJzb3MvbGlzdGFkbyIpCiAgICAgICAgLy9TSSBTQUxFIEJJRU4KICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIAogICAgICAgICAgICBzZWxmLmNvbmN1cnNvcyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5tYXAoKGNvbmN1cnNvKSA9PnsKICAgICAgICAgICAgY29uY3Vyc28udXJsX2ZvdG8gPSAiaHR0cDovL2xvY2FsaG9zdDozMDAzL2ltYWdlcy8iICsgY29uY3Vyc28udXJsX2ZvdG87CgogICAgICAgICAgcmV0dXJuIGNvbmN1cnNvOwogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLy9TSSBTQUxFIE1BTAogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgICAgIH0KIH0sCiAgCiAKCmRlbGV0ZUNvbmNvdXJzZShpbmRleCl7CiAKICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7CiAgICAgIGNvbnN0IGlkX2NvbmN1cnNvID0gc2VsZi5jb25jdXJzb3NbaW5kZXhdLmlkX2NvbmN1cnNvOwogICAgIDsKICAgICAgLy9Db2pvIHRva2VuIGUgaWQKICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKICAgICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZCIpCiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSBgQmVhcmVyICR7dG9rZW59YDsKICAgICAgCgpTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiLwn6STIiwKICAgICAgICB0ZXh0OiAiVmFzIGEgZWxpbWluYXIgZGVmaW5pdGl2YW1lbnRlIGVzdGUgY29uY3Vyc28gwr9Fc3TDoXMgc2VndXJhPyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMUNBMUYyIiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNFQjU3ODQiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiUXVpZXJvIGVsaW1pbmFyIGVzdGUgY29uY3Vyc28iLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJRdWllcm8gbWFudGVuZXJsbyBlbiBsYSBCQkREIiwKICAgICAgICAKICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgYXhpb3MKICAgICAgICAgICAgLmRlbGV0ZSggImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMy9jb25jdXJzb3MvZGVsZXRlLyIgKyBpZF9jb25jdXJzbykKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRpdGxlOiAi4pyFIiwKICAgICAgICAgICAgdGV4dDogIlNlIGhhIGVsaW1pbmFkbyBjb3JyZWN0YW1lbnRlIiwgbm9tYnJlOiBKb2kuc3RyaW5nKCkKICAgIC5tYXgoNTAwKQogICAgLnJlcXVpcmVkKCkKICAgIC5lcnJvcigKICAgICAgbmV3IEVycm9yKCdFbCBub21icmUgZGVsIGNvbmN1cnNvIG5vIGRlYmUgZXhjZWRlciBkZSBsb3MgNTAwIGNhcmFjdGVyZXMnKQogICAgKSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJPLksiLAogICAgICAgICAgICB0aW1lcjogNDAwMAogICAgICAgICAgfSkKCgogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgoKICAgICBoYW5kbGVGaWxlVXBsb2FkKCl7CiAgICB0aGlzLnVybF9mb3RvID0gdGhpcy4kcmVmcy51cmxfZm90by5maWxlc1swXTsKICB9LAoKCgoKIGNyZWF0ZU5ld0NvbmNvdXJzZSgpIHsKICAgICAgCiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKICAgICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaWQiKTsKICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9IGBCZWFyZXIgJHt0b2tlbn1gOwoKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgidXJsX2ZvdG8iLCBzZWxmLnVybF9mb3RvKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJub21icmUiLCBzZWxmLm5vbWJyZSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmVjaGFfZmluYWwiLCBzZWxmLmZlY2hhX2ZpbmFsKQogICAgICBmb3JtRGF0YS5hcHBlbmQoImRlc2NyaXBjaW9uIiwgc2VsZi5kZXNjcmlwY2lvbik7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgibW9kYWxpZGFkIiwgc2VsZi5tb2RhbGlkYWQpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImdlbmVybyIsIHNlbGYuZ2VuZXJvKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJjaXVkYWQiLCBzZWxmLmNpdWRhZCk7CiAgICAgIAoKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAzL2NvbmN1cnNvcy9udWV2b19jb25jdXJzbyIsIGZvcm1EYXRhLHsKICAgICAgICAKICAgICAgICBoZWFkZXJzOnsKICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsCiAgICAgICAgICB9LCAgCiAgICAgIAogICAgICAgIH0gKQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBzZWxmLmNsb3NlTW9kYWwoKTsKICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRpdGxlOiAiRWwgY29uY3Vyc28gaGEgc2lkbyBhZ3JlZ2FkbyBjb3JyZWN0YW1lbnRlIiwKICAgICAgICAgIH0pOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0sMjAwMCkKICAgICAgICAgIAogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgfSk7CiAgICB9LCAgIAoKIAovLyBMQSBMTEFNQURBIEEgTEEgRlVOQ0nDk04gRU4gTEEgQ0FSR0EKICBjcmVhdGVkKCkgewogICAgdGhpcy5zaG93QWxsQ29uY291cnNlcygpOwogICAgCn0sCiAgICAKCn07Cg=="},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;;AAGA","file":"Admin.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- Definimos el título de página visible en navegador -->\n    <vue-headful title=\"Admin\" description=\"Herramientas de administrador\" />\n\n    <!-- Inserción del componente menú en la cabecera de la vista -->\n    <menucustom></menucustom>\n\n    <!--Aquí es donde cargo todos los concursos con una computed -->\n    <div id=\"concursoscontenedor\">\n      <h1>Todos los concursos hasta la fecha</h1>\n\n      <!--Aquí un contenedor para centrar en la parte superior el botón y el buscador -->\n      <div id=\"contenedorbuscadoryañadirconcurso\">\n        <!-- Forumulario de búsqueda -->\n        <div id=\"formulariobusqueda\">\n          <label for=\"bySearch\">Búsqueda</label>\n          <br />\n          <input\n            v-model=\"search\"\n            id=\"search\"\n            name=\"bySearch\"\n            type=\"search\"\n            placeholder=\"🔍 Nombre/Descripción/Género/Modalidad...\"\n          />\n        </div>\n      </div>\n\n      <!--Este es el modal donde el Admin va a añadir un nuevo concurso -->\n      <div class=\"modal\" v-show=\"modal\">\n        <div class=\"modalBox\">\n          <label for=\"nombre\">Nombre:</label>\n          <input type=\"text\" name=\"nombre\" id=\"nombre\" v-model=\"nombre\" />\n\n          <br />\n          <label for=\"fecha_final\">Fecha de cierre en formato \"YYYY-MM-MM\":</label>\n          <input type=\"date\" name=\"fecha_final\" id=\"fecha_final\" v-model=\"fecha_final\" />\n\n          <br />\n          <label for=\"descripcion\" size=\"500\">Información y Bases:</label>\n          <input type=\"text\" name=\"descripcion\" id=\"descripcion\" v-model=\"descripcion\" />\n\n          <br />\n          <label for=\"modalidad\">Modalidad:</label>\n          <input v-model=\"modalidad\" type=\"radio\" name=\"modalidad\" value=\"online\" /> Online\n          <input v-model=\"modalidad\" type=\"radio\" name=\"modalidad\" value=\"presencial\" />\n          Presencial\n          <br />\n          <label for=\"genero\">Género:</label>\n          <input type=\"text\" name=\"genero\" id=\"genero\" v-model=\"genero\" />\n\n          <br />\n          <label for=\"ciudad\">Ciudad:</label>\n          <input type=\"text\" name=\"ciudad\" id=\"ciudad\" v-model=\"ciudad\" />\n\n          <br />\n\n          <div id=\"selecciondefoto\">\n            <label for=\"file\">👤 Selecciona tu nueva foto 👉 📸 .</label>\n            <input\n              type=\"file\"\n              id=\"url_foto\"\n              name=\"url_foto\"\n              ref=\"url_foto\"\n              @change=\"handleFileUpload()\"\n            />\n          </div>\n\n          <button @click=\"createNewConcourse()\">💾 Guardar</button>\n          <button @click=\"closeModal()\">⬅️ Cerrar</button>\n        </div>\n      </div>\n      <button @click=\"openModal()\">➕ AÑADIR CONCURSO NUEVO</button>\n\n      <div class=\"contenedor\">\n        <br />\n        <!-- Contenedor para dar formato a la ficha de productos, lo cargamos con el array de productos filtrados -->\n        <div\n          class=\"concursoscontenedor\"\n          v-for=\"(concurso, index) in concursosFiltrados\"\n          :key=\"concurso.id\"\n        >\n          <p>\n            📌\n            {{ concurso.id_concurso }}\n          </p>\n          <h3>\n            <b>{{ concurso.nombre }}</b>\n          </h3>\n          <p>\n            <img :src=\"concurso.url_foto\" />\n          </p>\n\n          <p style=\"color:red\">\n            <b>📆 Cierre de suscripción:</b>\n            {{ concurso.fecha_final.slice(0, 10) }}\n          </p>\n\n          <p>\n            <b>🏠 Modalidad:</b>\n            {{ concurso.modalidad }}\n          </p>\n\n          <p>\n            <b>🎭 Genero:</b>\n            {{ concurso.genero }}\n          </p>\n\n          <p v-if=\"concurso.ciudad\">\n            <b>🌆 Ciudad:</b>\n            {{ concurso.ciudad }}\n          </p>\n          <p v-if=\"concurso.fecha_asignacion_ganador\">\n            <b>📅 Publicación de ganadores:</b>\n            {{ concurso.fecha_asignacion_ganador }}\n          </p>\n          <p v-if=\"concurso.nombre_ganador\">\n            <b>🥇 Ganador:</b>\n            {{concurso.nombre_ganador}}\n          </p>\n          <p v-if=\"concurso.valoracion\">\n            <b>🌠 Valoración media:</b>\n            {{ concurso.valoracion }}\n          </p>\n          <button @click=\"deleteConcourse(index)\">🗑 Eliminar</button>\n          <button @click=\"editConcourse()\">✍️Editar</button>\n          <button @click=\"seeParticipants()\">👥 Ver listado de participantes</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//IMPORTAMOS PARA\n// manejar endpoints y rutas\nimport axios from \"axios\";\n// alertas custom\nimport Swal from \"sweetalert2\";\n// Titular las pestañas visibles en el navegador\nimport vueHeadful from \"vue-headful\";\n// componentes internos\nimport menucustom from \"@/components/MenuCustom.vue\"\nexport default {\n    name: \"Admin\",\n    components: {menucustom},\n\n    data(){\n        return{\n        concursos :[],\n        search:\"\",\n        nombre: \"\",\n        fecha_final: \"\",\n        descripcion: \"\",\n        modalidad:\"\",\n        genero:\"\",\n        ciudad:\"\",\n        fecha_publicacion:\"\",\n        modal: false,\n        \n        };\n    },\n\n\ncomputed: {\n    //FUNCIÓN PARA FILTRAR PRODUCTOS\n    concursosFiltrados() {\n      // Si en la búsqueda no hay nada nos devuelve todo.\n      if (!this.search) {\n        return this.concursos;\n        \n      }\n      return this.concursos.filter(\n        (concurso) =>\n          concurso.nombre.toLowerCase().includes(this.search.toLowerCase()) ||\n          concurso.descripcion\n            .toLowerCase()\n            .includes(this.search.toLowerCase()) ||\n          concurso.modalidad\n            .toLowerCase()\n            .includes(this.search.toLowerCase()) ||\n          concurso.genero.toLowerCase().includes(this.search.toLowerCase())\n        //Ojo aquí, pendiente que funcione la búsqueda por ciudad.\n        // concurso.ciudad.toLowerCase().includes(this.search.toLowerCase())\n      );\n    },\n  },\n\n\n    methods: {\n\n\n    \n   openModal() {\n      this.modal = true;\n      \n\n   },\n   closeModal(){\n     this.modal = false;\n   },\n\n\n showAllConcourses(){\n    let self= this;\n    axios\n        .get(\"http://localhost:3003/concursos/listado\")\n        //SI SALE BIEN\n        .then(function (response) {\n          \n            self.concursos = response.data.data.map((concurso) =>{\n            concurso.url_foto = \"http://localhost:3003/images/\" + concurso.url_foto;\n\n          return concurso;\n          console.log(response);\n        });\n        })\n        //SI SALE MAL\n        .catch(function (error) {\n          console.error(error);\n        });\n        }\n },\n  \n \n\ndeleteConcourse(index){\n \n      const self = this;\n      const id_concurso = self.concursos[index].id_concurso;\n     ;\n      //Cojo token e id\n      const token = localStorage.getItem(\"token\");\n      const data = localStorage.getItem(\"id\")\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n      \n\nSwal.fire({\n        title:\"🤓\",\n        text: \"Vas a eliminar definitivamente este concurso ¿Estás segura?\",\n        showCancelButton: true,\n        confirmButtonColor: \"#1CA1F2\",\n        cancelButtonColor: \"#EB5784\",\n        confirmButtonText: \"Quiero eliminar este concurso\",\n        cancelButtonText: \"Quiero mantenerlo en la BBDD\",\n        \n      }).then((result) => {\n        if (result.value) {\n          axios\n            .delete( \"http://localhost:3003/concursos/delete/\" + id_concurso)\n            .then(function(response) {\n              \n            })\n            .catch(function(error) {\n              console.error(error.response.data.message);\n            });\n          Swal.fire({\n            title: \"✅\",\n            text: \"Se ha eliminado correctamente\", nombre: Joi.string()\n    .max(500)\n    .required()\n    .error(\n      new Error('El nombre del concurso no debe exceder de los 500 caracteres')\n    ),\n            confirmButtonText: \"O.K\",\n            timer: 4000\n          })\n\n\n          location.reload();\n        }\n      });\n    },\n\n\n     handleFileUpload(){\n    this.url_foto = this.$refs.url_foto.files[0];\n  },\n\n\n\n\n createNewConcourse() {\n      \n      var self = this;\n      const token = localStorage.getItem(\"token\");\n       const data = localStorage.getItem(\"id\");\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n\n      let formData = new FormData();\n      formData.append(\"url_foto\", self.url_foto);\n      formData.append(\"nombre\", self.nombre);\n      formData.append(\"fecha_final\", self.fecha_final)\n      formData.append(\"descripcion\", self.descripcion);\n      formData.append(\"modalidad\", self.modalidad);\n      formData.append(\"genero\", self.genero);\n      formData.append(\"ciudad\", self.ciudad);\n      \n\n      axios\n        .post(\"http://localhost:3003/concursos/nuevo_concurso\", formData,{\n        \n        headers:{\n             \"Content-Type\": \"multipart/form-data\",\n          },  \n      \n        } )\n        .then(function(response) {\n          self.closeModal();\n          Swal.fire({\n            title: \"El concurso ha sido agregado correctamente\",\n          });\n        setTimeout(function(){\n          location.reload();\n        },2000)\n          \n        })\n        .catch(function(error) {\n          console.error(error.response.data.message);\n        });\n    },   \n\n \n// LA LLAMADA A LA FUNCIÓN EN LA CARGA\n  created() {\n    this.showAllConcourses();\n    \n},\n    \n\n};\n</script>\n\n<style scoped>\n.concursoscontenedor {\n  box-shadow: 0 0 10px rgb(12, 12, 12);\n  padding: 2em;\n  width: 250px;\n  margin: 10px auto;\n  border-radius: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n}\n\n.contenedor {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  width: 90%;\n  margin: 10px auto;\n}\nimg {\n  width: 100px;\n  height: 100px;\n  border-radius: 20px;\n  transition: transform 0.5s ease-in-out;\n}\nimg:hover {\n  transform: scale(1.9);\n}\n\n#formulariobusqueda {\n  padding: 2em;\n}\n\n#formulariobusqueda input {\n  width: 500px;\n  height: 40px;\n}\n\nh3 {\n  text-transform: uppercase;\n  font-size: 1.3em;\n}\np {\n  font-size: 0.8em;\n}\n\n#contenedorbuscadoryañadirconcurso {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n}\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  border-radius: 150px;\n  width: 100%;\n}\n\n.modalBox {\n  background: #fefefe;\n  margin: 15% auto;\n  padding: 20px;\n  border: 1px solid #888;\n  width: 50%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: center;\n  border-radius: 50px;\n  border: solid 4px black;\n  box-shadow: 0 0 10px rgb(12, 12, 12);\n  font-size: 1.8em;\n}\n</style>"]}]}