{"remainingRequest":"/home/hab07/Desktop/ProyectoBackFront/Frontend/node_modules/babel-loader/lib/index.js!/home/hab07/Desktop/ProyectoBackFront/Frontend/src/api/utils.js","dependencies":[{"path":"/home/hab07/Desktop/ProyectoBackFront/Frontend/src/api/utils.js","mtime":1592508303810},{"path":"/home/hab07/Desktop/ProyectoBackFront/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hab07/Desktop/ProyectoBackFront/Frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2hhYjA3L0Rlc2t0b3AvUHJveWVjdG9CYWNrRnJvbnQvRnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgand0IGZyb20gImp3dC1kZWNvZGUiOwp2YXIgRU5EUE9JTlQgPSAiaHR0cDovL2xvY2FsaG9zdDozMDAzIjsKdmFyIEFVVEhfVE9LRU5fS0VZID0gImF1dGhUb2tlbiI7CnZhciBST0xFID0gInJvbGUiOwp2YXIgVVNFUiA9ICJ1c2VyIjsKZXhwb3J0IGZ1bmN0aW9uIHNpbmdJblVzZXIobWFpbCwgY29udHJhc2VuaGEpIHsKICByZXR1cm4gbmV3IFByb21pc2UoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIHJlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgICB1cmw6ICIiLmNvbmNhdChFTkRQT0lOVCwgIi91c3Vhcmlvcy9sb2dpbiIpLAogICAgICAgICAgICAgICAgLy9VUkwgREUgTEEgQVVURU5USUNBQ0nDk04KICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgLy9Nw4lUT0RPIERFIExBIEFVVEVOVElDQUNJw5NOCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgIC8vREFUT1MgREUgTEEgQVVURU5USUNBQ0nDk04KICAgICAgICAgICAgICAgICAgbWFpbDogbWFpbCwKICAgICAgICAgICAgICAgICAgLy9VU1VBUklvCiAgICAgICAgICAgICAgICAgIGNvbnRyYXNlbmhhOiBjb250cmFzZW5oYSwKICAgICAgICAgICAgICAgICAgLy9QQVNTV09SRAogICAgICAgICAgICAgICAgICBncmFudF90eXBlOiAicGFzc3dvcmQiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBzZXRBdXRoVG9rZW4ocmVzLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgIHNldElzQWRtaW4ocmVzLmRhdGEuYWRtaW4pOyAvL2FxdcOtIHNldAoKICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIkVycm9yIGVuIGxvZ2luOiAiLCBfY29udGV4dC50MCk7CiAgICAgICAgICAgICAgcmVqZWN0KF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOV1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKTsKfSAvL0dVQVJEQVIgVE9LRU4gRU4gTE9DQUxTVE9SQUdFCgpleHBvcnQgZnVuY3Rpb24gc2V0QXV0aFRva2VuKHRva2VuKSB7CiAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bImF1dGhvcml6YXRpb24iXSA9ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEFVVEhfVE9LRU5fS0VZLCB0b2tlbik7Cn0gLy9GVU5DScOTTiBERSBMT0dPVVQKCmV4cG9ydCBmdW5jdGlvbiBjbGVhckxvZ2luKCkgewogIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiIjsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidG9rZW4iKTsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaWQiKTsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgicm9sIik7CiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIm1haWwiKTsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgibmFtZSIpOwogIGNsZWFyQWRtaW4oKTsKfSAvLyBDT0dFUiBFTCBUT0tFTiBERUwgTE9DQUxTVE9SQUdFCgpleHBvcnQgZnVuY3Rpb24gZ2V0QXV0aFRva2VuKCkgewogIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShBVVRIX1RPS0VOX0tFWSk7Cn0gLy9DT05TSUdVSUVOVEUgTEEgRkVDSEEgREUgRVhQSVJBQ0nDk04gREVMIFRPS0VOCgpleHBvcnQgZnVuY3Rpb24gZ2V0VG9rZW5FeHBpcmF0aW9uRGF0ZShlbmNvZGVkVG9rZW4pIHsKICB2YXIgdG9rZW4gPSBqd3QoZW5jb2RlZFRva2VuKTsgLy8gU0kgTk8gSEFZLCBOTyBTSUdVRQoKICBpZiAoIXRva2VuLmV4cCkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApOwogIGRhdGUuc2V0VVRDU2Vjb25kcyh0b2tlbi5leHApOwogIHJldHVybiBkYXRlOwp9IC8vQ09NUFJPQkFORE8gVklHRU5DSUEgREUgTEEgRkVDSEEKCmV4cG9ydCBmdW5jdGlvbiBpc1Rva2VuRXhwaXJlZCh0b2tlbikgewogIHZhciBleHBpcmF0aW9uRGF0ZSA9IGdldFRva2VuRXhwaXJhdGlvbkRhdGUodG9rZW4pOwogIHJldHVybiBleHBpcmF0aW9uRGF0ZSA8IG5ldyBEYXRlKCk7Cn0gLy9DT01QUk9CQVIgU0kgRUwgVVNFUiBFU1TDgSBMT0dFQURPIE8gTk8KCmV4cG9ydCBmdW5jdGlvbiBpc0xvZ2dlZEluKCkgewogIHZhciBhdXRoVG9rZW4gPSBnZXRBdXRoVG9rZW4oKTsKICByZXR1cm4gISFhdXRoVG9rZW4gJiYgIWlzVG9rZW5FeHBpcmVkKGF1dGhUb2tlbik7Cn0gLy9GVU5DSU9ORVMgUEFSQSBDT01QUk9CQVIgRUwgUk9MIERFTCBVU0VSID09PT09PT09PT09Ci8vR1VBUkRBUiBTSSBFUyBBRE1JTiBFTiBMT0NBTCBTVE9SQUdFCgpleHBvcnQgZnVuY3Rpb24gc2V0SXNBZG1pbihhZG1pbikgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFJPTEUsIGFkbWluKTsKfSAvL0JPUlJBUiBST0wgREVMIFVTRVIgRU4gTE9DQUwgU1RPUkFHRQoKZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWRtaW4oKSB7CiAgcmV0dXJuIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFJPTEUpOwp9IC8vUkVDVVBFUkFSIEVMIFJPTCBHVUFSREFETyBFTiBFTCBMT0NBTCBTVE9SQUdFCgpleHBvcnQgZnVuY3Rpb24gZ2V0SXNBZG1pbigpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oUk9MRSk7Cn0gLy9DT01QUk9CQVIgUk9MCgpleHBvcnQgZnVuY3Rpb24gY2hlY2tBZG1pbigpIHsKICB2YXIgcm9sZSA9IGZhbHNlOwogIHZhciBhZG1pbiA9IGdldElzQWRtaW4oKTsKCiAgaWYgKGFkbWluID09PSAiYWRtaW4iKSB7CiAgICByb2xlID0gdHJ1ZTsKICB9IGVsc2UgewogICAgcm9sZSA9IGZhbHNlOwogIH0KCiAgcmV0dXJuIHJvbGU7Cn0gLy8gRXN0YSBmdW5jacOzbiBubyBsYSB1dGlsaXpvLCBsYSB0ZW5nbyBlbiBiYXJiZWNobyBwb3JxdWUgZXN0YWJhIHRyYXRhbmRvCi8vIGRlIHNhY2FyIGVsIG5vbWJyZSBkZWwgdXN1YXJpbyBhY3Rpdm8gZW4gZWwgbWVuw7ogZGUgbmF2ZWdhY2nDs24uCgpleHBvcnQgZnVuY3Rpb24gZ2V0VXNlckFjdGl2ZSgpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVVNFUik7Cn0="},{"version":3,"sources":["/home/hab07/Desktop/ProyectoBackFront/Frontend/src/api/utils.js"],"names":["axios","jwt","ENDPOINT","AUTH_TOKEN_KEY","ROLE","USER","singInUser","mail","contrasenha","Promise","resolve","reject","url","method","data","grant_type","res","setAuthToken","token","setIsAdmin","admin","console","log","defaults","headers","common","localStorage","setItem","clearLogin","removeItem","clearAdmin","getAuthToken","getItem","getTokenExpirationDate","encodedToken","exp","date","Date","setUTCSeconds","isTokenExpired","expirationDate","isLoggedIn","authToken","getIsAdmin","checkAdmin","role","getUserActive"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport jwt from \"jwt-decode\";\n\nconst ENDPOINT = \"http://localhost:3003\";\nconst AUTH_TOKEN_KEY = \"authToken\";\nconst ROLE = \"role\";\nconst USER = \"user\";\n\nexport function singInUser(mail, contrasenha) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      let res = await axios({\n        url: `${ENDPOINT}/usuarios/login`, //URL DE LA AUTENTICACIÓN\n        method: \"POST\", //MÉTODO DE LA AUTENTICACIÓN\n        data: {\n          //DATOS DE LA AUTENTICACIÓN\n          mail: mail, //USUARIo\n          contrasenha: contrasenha, //PASSWORD\n          grant_type: \"password\",\n        },\n      });\n      setAuthToken(res.data.token);\n      setIsAdmin(res.data.admin); //aquí set\n\n      resolve();\n    } catch (err) {\n      console.log(\"Error en login: \", err);\n      reject(err);\n    }\n  });\n}\n\n//GUARDAR TOKEN EN LOCALSTORAGE\n\nexport function setAuthToken(token) {\n  axios.defaults.headers.common[\"authorization\"] = `Bearer ${token}`;\n  localStorage.setItem(AUTH_TOKEN_KEY, token);\n}\n\n//FUNCIÓN DE LOGOUT\n\nexport function clearLogin() {\n  axios.defaults.headers.common[\"Authorization\"] = \"\";\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"id\");\n  localStorage.removeItem(\"rol\");\n  localStorage.removeItem(\"mail\");\n  localStorage.removeItem(\"name\");\n  clearAdmin();\n}\n\n// COGER EL TOKEN DEL LOCALSTORAGE\n\nexport function getAuthToken() {\n  return localStorage.getItem(AUTH_TOKEN_KEY);\n}\n\n//CONSIGUIENTE LA FECHA DE EXPIRACIÓN DEL TOKEN\n\nexport function getTokenExpirationDate(encodedToken) {\n  let token = jwt(encodedToken);\n  // SI NO HAY, NO SIGUE\n  if (!token.exp) {\n    return null;\n  }\n\n  let date = new Date(0);\n  date.setUTCSeconds(token.exp);\n  return date;\n}\n\n//COMPROBANDO VIGENCIA DE LA FECHA\n\nexport function isTokenExpired(token) {\n  let expirationDate = getTokenExpirationDate(token);\n  return expirationDate < new Date();\n}\n\n//COMPROBAR SI EL USER ESTÁ LOGEADO O NO\n\nexport function isLoggedIn() {\n  let authToken = getAuthToken();\n  return !!authToken && !isTokenExpired(authToken);\n}\n\n//FUNCIONES PARA COMPROBAR EL ROL DEL USER ===========\n\n//GUARDAR SI ES ADMIN EN LOCAL STORAGE\n\nexport function setIsAdmin(admin) {\n  localStorage.setItem(ROLE, admin);\n}\n\n//BORRAR ROL DEL USER EN LOCAL STORAGE\n\nexport function clearAdmin() {\n  return localStorage.removeItem(ROLE);\n}\n\n//RECUPERAR EL ROL GUARDADO EN EL LOCAL STORAGE\n\nexport function getIsAdmin() {\n  return localStorage.getItem(ROLE);\n}\n\n//COMPROBAR ROL\nexport function checkAdmin() {\n  let role = false;\n  let admin = getIsAdmin();\n  if (admin === \"admin\") {\n    role = true;\n  } else {\n    role = false;\n  }\n  return role;\n}\n\n// Esta función no la utilizo, la tengo en barbecho porque estaba tratando\n// de sacar el nombre del usuario activo en el menú de navegación.\nexport function getUserActive() {\n  return localStorage.getItem(USER);\n}\n"]}]}